<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline';">
    <title>FTP File Explorer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Configuration Modal -->
    <div id="configModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Pengaturan Aplikasi</h2>
                <p>Konfigurasi koneksi FTP server untuk memulai</p>
            </div>
            <div class="modal-body">
                <form id="configForm">
                    <!-- FTP Configuration Section -->
                    <div class="config-section">
                        <h3>üóÇÔ∏è Konfigurasi FTP</h3>
                        <div class="input-group">
                            <label for="ftpHost">Host Server FTP:</label>
                            <input type="text" id="ftpHost" name="ftpHost" placeholder="contoh: ftp.example.com" required>
                            <small class="error-text" id="ftpHostError"></small>
                        </div>
                        
                        <div class="input-row">
                            <div class="input-group">
                                <label for="ftpPort">Port:</label>
                                <input type="number" id="ftpPort" name="ftpPort" value="21" min="1" max="65535" required>
                                <small class="error-text" id="ftpPortError"></small>
                            </div>
                            
                            <div class="input-group">
                                <label for="ftpSecure">
                                    <input type="checkbox" id="ftpSecure" name="ftpSecure">
                                    Koneksi Aman (FTPS)
                                </label>
                            </div>
                        </div>
                        
                        <div class="input-group">
                            <label for="ftpUsername">Username FTP:</label>
                            <input type="text" id="ftpUsername" name="ftpUsername" placeholder="Username FTP" required>
                            <small class="error-text" id="ftpUsernameError"></small>
                        </div>
                        
                        <div class="input-group">
                            <label for="ftpPassword">Password FTP:</label>
                            <input type="password" id="ftpPassword" name="ftpPassword" placeholder="Password FTP" required>
                            <small class="error-text" id="ftpPasswordError"></small>
                        </div>
                        
                        <div class="config-actions">
                            <button type="button" id="importConfigButton" class="import-button">üìÅ Import Config</button>
                            <button type="button" id="exportConfigButton" class="export-button">üíæ Export Config</button>
                            <button type="button" id="testFtpButton" class="test-button">Test Koneksi FTP</button>
                        </div>
                        <div id="ftpTestResult" class="test-result"></div>
                        <input type="file" id="configFileInput" accept=".json" style="display: none;">
                    </div>
                    

                    
                    <!-- Form Actions -->
                    <div class="modal-actions">
                        <button type="button" id="cancelConfig" class="button-secondary">Batal</button>
                        <button type="submit" id="saveConfig" class="button-primary">Simpan Konfigurasi</button>
                        <button type="button" id="connectFtpButton" class="button-connect" style="display: none;">üîó Hubungkan</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="main-app">
        <!-- Header -->
        <header class="app-header">
            <div class="header-left">
                <h1>FTP File Explorer</h1>
                <div class="connection-status">
                    <span id="ftpStatus" class="status-indicator">FTP: Disconnected</span>
                </div>
            </div>
            <div class="header-right">
                <button id="settingsButton" class="header-button" title="Pengaturan">
                    ‚öôÔ∏è
                </button>
                <button id="refreshButton" class="header-button" title="Refresh Cache">
                    üîÑ
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="app-content">
            <!-- Navigation Tabs -->
            <nav class="tab-nav">
                <button class="tab-button active" data-tab="ftp">
                    üóÇÔ∏è File Explorer
                </button>

            </nav>

            <!-- Tab Contents -->
            <div class="tab-contents">
                <!-- FTP File Explorer Tab -->
                <div id="ftpTab" class="tab-content active">
                    <div class="ftp-container">
                        <div class="ftp-sidebar">
                            <div class="sidebar-header">
                                <h3>Direktori FTP</h3>
                                <button id="refreshFtpButton" class="icon-button" title="Refresh">üîÑ</button>
                            </div>
                            <div class="ftp-tree" id="ftpTree">
                                <div class="loading-state" id="ftpLoading">
                                    <div class="spinner"></div>
                                    <p>Memuat direktori FTP...</p>
                                </div>
                                <div class="empty-state" id="ftpEmpty" style="display: none;">
                                    <p>Tidak ada data FTP. Klik refresh atau periksa konfigurasi.</p>
                                </div>
                            </div>
                        </div>
                        <div class="ftp-main">
                            <div class="breadcrumb" id="ftpBreadcrumb">
                                <span>Pilih folder dari sidebar</span>
                            </div>
                            
                            <!-- Upload Section -->
                            <div class="upload-section" id="uploadSection" style="display: none;">
                                <div class="upload-controls">
                                    <button id="browseFilesBtn" class="button-primary">
                                        üìÅ Browse Files
                                    </button>
                                    <button id="uploadSelectedBtn" class="button-secondary" disabled>
                                        ‚¨ÜÔ∏è Upload Selected
                                    </button>
                                    <span class="upload-info" id="uploadInfo">No files selected</span>
                                </div>
                                
                                <!-- Delete Controls -->
                                <div class="delete-controls" id="deleteControls" style="display: none;">
                                    <button id="selectAllBtn" class="button-secondary">
                                        ‚òëÔ∏è Select All
                                    </button>
                                    <button id="deselectAllBtn" class="button-secondary">
                                        ‚òê Deselect All
                                    </button>
                                    <button id="deleteSelectedBtn" class="button-danger" disabled>
                                        üóëÔ∏è Delete Selected
                                    </button>
                                    <span class="delete-info" id="deleteInfo">No items selected</span>
                                </div>
                                
                                <!-- Drag and Drop Zone -->
                                <div class="drag-drop-zone" id="dragDropZone">
                                    <div class="drag-drop-content">
                                        <div class="drag-drop-icon">üìÅ</div>
                                        <p class="drag-drop-text">Drag and drop files here or click Browse Files</p>
                                        <p class="drag-drop-subtext">Supports multiple files</p>
                                    </div>
                                </div>
                                
                                <!-- Selected Files List -->
                                <div class="selected-files" id="selectedFilesList" style="display: none;">
                                    <h4>Selected Files:</h4>
                                    <div class="file-items" id="selectedFilesItems"></div>
                                </div>
                                
                                <!-- Upload Progress -->
                                <div class="upload-progress" id="uploadProgress" style="display: none;">
                                    <div class="progress-header">
                                        <h4>Upload Progress</h4>
                                        <button id="cancelUploadBtn" class="button-danger">Cancel</button>
                                    </div>
                                    <div class="progress-items" id="progressItems"></div>
                                </div>
                            </div>
                            
                            <div class="file-list" id="ftpFileList">
                                <div class="welcome-message">
                                    <h3>Selamat Datang di FTP File Explorer</h3>
                                    <p>Pilih folder dari sidebar untuk melihat isinya.</p>
                                    <p>Double-click pada file untuk mendownload dan membukanya.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </main>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="spinner"></div>
        <p id="loadingText">Loading...</p>
    </div>

    <!-- Notification Toast -->
    <div id="notification" class="notification" style="display: none;">
        <span id="notificationText"></span>
        <button id="notificationClose">&times;</button>
    </div>

    <!-- File Editor Modal -->
    <div id="fileEditorModal" class="modal" style="display: none;">
        <div class="modal-content editor-modal">
            <div class="modal-header">
                <h2 id="editorTitle">Edit File</h2>
                <button id="closeEditorBtn" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <div class="editor-toolbar">
                    <div class="editor-info">
                        <span id="editorFilePath"></span>
                        <span id="editorFileSize"></span>
                    </div>
                    <div class="editor-actions">
                        <button id="saveFileBtn" class="button-primary">üíæ Save</button>
                        <button id="cancelEditBtn" class="button-secondary">Cancel</button>
                    </div>
                </div>
                <div class="editor-container">
                    <textarea id="fileContentEditor" placeholder="File content will appear here..."></textarea>
                </div>
                <div class="editor-status" id="editorStatus" style="display: none;">
                    <span id="editorStatusText"></span>
                </div>
            </div>
        </div>
    </div>

    <!-- File Replace Modal -->
    <div id="fileReplaceModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Replace File</h2>
                <button id="closeReplaceBtn" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <p>Select a local file to replace: <strong id="replaceFilePath"></strong></p>
                <div class="file-replace-zone">
                    <input type="file" id="replaceFileInput" style="display: none;">
                    <button id="browseReplaceBtn" class="button-primary">üìÅ Browse Local File</button>
                    <div id="replaceFileInfo" style="display: none;">
                        <p><strong>Selected:</strong> <span id="replaceFileName"></span></p>
                        <p><strong>Size:</strong> <span id="replaceFileSize"></span></p>
                    </div>
                </div>
                <div class="modal-actions">
                    <button id="cancelReplaceBtn" class="button-secondary">Cancel</button>
                    <button id="confirmReplaceBtn" class="button-danger" disabled>Replace File</button>
                </div>
                <div class="replace-progress" id="replaceProgress" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="replaceProgressFill"></div>
                    </div>
                    <span id="replaceProgressText">0%</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden File Input -->
    <input type="file" id="fileInput" multiple style="display: none;">

    <script src="renderer.js"></script>
</body>
</html>
